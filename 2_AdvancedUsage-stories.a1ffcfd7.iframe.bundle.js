/*! For license information please see 2_AdvancedUsage-stories.a1ffcfd7.iframe.bundle.js.LICENSE.txt */
(self.webpackChunk_fjdr_react_diagrams_gallery=self.webpackChunk_fjdr_react_diagrams_gallery||[]).push([[419],{"../node_modules/.pnpm/@storybook+addon-actions@7.4.4_@types+react-dom@18.2.7_@types+react@18.2.22_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@storybook/addon-actions/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{aD:()=>chunk_AY7I2SME.aD});var chunk_AY7I2SME=__webpack_require__("../node_modules/.pnpm/@storybook+addon-actions@7.4.4_@types+react-dom@18.2.7_@types+react@18.2.22_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@storybook/addon-actions/dist/chunk-AY7I2SME.mjs")},"./demos/2_AdvancedUsage.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CloneSelected:()=>_2_AdvancedUsage_stories_CloneSelected,DragAndDrop:()=>DragAndDrop,LinkingByClickingInsteadOfDragging:()=>LinkingByClickingInsteadOfDragging,ProgramaticallyModifyingGraph:()=>ProgramaticallyModifyingGraph,RightAnglesRouting:()=>RightAnglesRouting,SerializingAndDeSerializing:()=>SerializingAndDeSerializing,SettingCustomDeleteKeys:()=>SettingCustomDeleteKeys,SmartRouting:()=>SmartRouting,__namedExportsOrder:()=>__namedExportsOrder,default:()=>_2_AdvancedUsage_stories});var dist=__webpack_require__("../packages/react-canvas-core/dist/index.js"),react_diagrams_dist=__webpack_require__("../packages/react-diagrams/dist/index.js"),forEach=__webpack_require__("../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/forEach.js"),forEach_default=__webpack_require__.n(forEach),react=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),DemoWorkspaceWidget=__webpack_require__("./demos/helpers/DemoWorkspaceWidget.tsx"),DemoCanvasWidget=__webpack_require__("./demos/helpers/DemoCanvasWidget.tsx"),jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");class CloneSelected extends react.Component{constructor(props){super(props),this.cloneSelected=this.cloneSelected.bind(this)}cloneSelected(){let{engine}=this.props,offset_x=100,offset_y=100,model=engine.getModel(),itemMap={};forEach_default()(model.getSelectedEntities(),(item=>{let newItem=item.clone(itemMap);newItem instanceof react_diagrams_dist.XF?(newItem.setPosition(newItem.getX()+offset_x,newItem.getY()+offset_y),model.addNode(newItem)):newItem instanceof react_diagrams_dist.KW&&(newItem.getPoints().forEach((p=>{p.setPosition(p.getX()+offset_x,p.getY()+offset_y)})),model.addLink(newItem)),newItem.setSelected(!1)})),this.forceUpdate()}render(){const{engine}=this.props;return(0,jsx_runtime.jsx)(DemoWorkspaceWidget.F,{buttons:(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:this.cloneSelected,children:"Clone Selected"}),children:(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})})}}CloneSelected.displayName="CloneSelected";var addon_actions_dist=__webpack_require__("../node_modules/.pnpm/@storybook+addon-actions@7.4.4_@types+react-dom@18.2.7_@types+react@18.2.22_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@storybook/addon-actions/dist/index.mjs"),json_beautify=__webpack_require__("../node_modules/.pnpm/json-beautify@1.1.1/node_modules/json-beautify/index.js");var values=__webpack_require__("../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/values.js"),values_default=__webpack_require__.n(values);class NodeDelayedPosition extends react.Component{constructor(props){super(props),this.updatePosition=this.updatePosition.bind(this),this.updatePositionViaSerialize=this.updatePositionViaSerialize.bind(this)}updatePosition(){const{engine}=this.props;const nodes=engine.getModel().getNodes();let node=nodes[Object.keys(nodes)[0]];node.setPosition(node.getX()+30,node.getY()+30),engine.repaintCanvas()}updatePositionViaSerialize(){let{engine}=this.props,model=engine.getModel(),str=JSON.stringify(model.serialize()),model2=new react_diagrams_dist.Vm,obj=JSON.parse(str),node=values_default()(obj.layers[1].models)[0];node.x+=30,node.y+=30,model2.deserializeModel(obj,engine),engine.setModel(model2)}render(){const{engine}=this.props;return(0,jsx_runtime.jsx)(DemoWorkspaceWidget.F,{buttons:[(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:this.updatePosition,children:"Update position"},1),(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:this.updatePositionViaSerialize,children:"Update position via serialize"},2)],children:(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})})}}NodeDelayedPosition.displayName="NodeDelayedPosition";var keys=__webpack_require__("../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/keys.js"),keys_default=__webpack_require__.n(keys),emotion_styled_browser_esm=__webpack_require__("../node_modules/.pnpm/@emotion+styled@11.11.0_@emotion+react@11.11.1_@types+react@18.2.22_react@18.2.0__@types+react@18.2.22_react@18.2.0/node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js");let S;(S||(S={})).Tray=emotion_styled_browser_esm.Z.div`
		min-width: 300px;
		background: rgb(20, 20, 20);
		flex-grow: 0;
		flex-shrink: 0;
	`;class TrayWidget extends react.Component{render(){return(0,jsx_runtime.jsx)(S.Tray,{children:this.props.children})}}TrayWidget.displayName="TrayWidget";var DiamondNodeFactory=__webpack_require__("./demos/demo-custom-node1/DiamondNodeFactory.tsx");const customTypes=["diamond","circle","ellipse"];class Application{constructor(){this.diagramEngine=react_diagrams_dist.ZP(),this.newModel();const state=this.diagramEngine.getStateMachine().getCurrentState();state instanceof react_diagrams_dist.Qo&&(state.dragNewLink.config.allowLooseLinks=!1)}newModel(){this.activeModel=new react_diagrams_dist.Vm,this.diagramEngine.setModel(this.activeModel),customTypes.map((type=>{this.diagramEngine.getNodeFactories().registerFactory(new DiamondNodeFactory.n(type))}));var node1=new react_diagrams_dist.Fs("Node 1","#B692F6");let port=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Node 2","#25AAD0");let port2=node2.addInPort("In");node2.setPosition(400,100);let link1=port.link(port2);this.activeModel.addAll(link1,node1,node2)}getActiveDiagram(){return this.activeModel}getDiagramEngine(){return this.diagramEngine}}let TrayItemWidget_S;!function(_S){_S.Tray=emotion_styled_browser_esm.Z.div`
		color: white;
		font-family: Helvetica, Arial;
		padding: 5px;
		margin: 0px 10px;
		border: solid 1px ${p=>p.color};
		border-radius: 5px;
		margin-bottom: 2px;
		cursor: pointer;
	`}(TrayItemWidget_S||(TrayItemWidget_S={}));class TrayItemWidget extends react.Component{render(){return(0,jsx_runtime.jsx)(TrayItemWidget_S.Tray,{color:this.props.color,draggable:!0,onDragStart:event=>{event.dataTransfer.setData("storm-diagram-node",JSON.stringify(this.props.model))},className:"tray-item",children:this.props.name})}}TrayItemWidget.displayName="TrayItemWidget";var DiamondNodeModel=__webpack_require__("./demos/demo-custom-node1/DiamondNodeModel.ts"),react_diagrams_defaults_dist=__webpack_require__("../packages/react-diagrams-defaults/dist/index.js");const PropertiesTray=_ref=>{let{engine,element,onClose}=_ref;const model=engine.getModel(),[node,setNode]=(0,react.useState)(null),[isAddPortIn,setIsAddPortIn]=(0,react.useState)(!1),[isAddPortOut,setIsAddPortOut]=(0,react.useState)(!1),[portName,setPortName]=(0,react.useState)(null),[portsIn,setPortsIn]=(0,react.useState)(null),[portsOut,setPortsOut]=(0,react.useState)(null),[isShape,setIsShape]=(0,react.useState)(!0),[selectedEntities,setSelectedEntities]=(0,react.useState)([]),previousSelectedRef=(0,react.useRef)([]),updateSelectedEntities=(0,react.useCallback)((()=>{const currentSelected=engine.getModel().getSelectedEntities();var prev,current;prev=previousSelectedRef.current,current=currentSelected,prev.length===current.length&&prev.every(((entity,index)=>entity.getID()===current[index].getID()))||(setSelectedEntities(currentSelected),previousSelectedRef.current=currentSelected,console.log("Selected entities updated:",currentSelected))}),[engine]);(0,react.useEffect)((()=>{const interval=setInterval(updateSelectedEntities,100);return()=>clearInterval(interval)}),[updateSelectedEntities]),(0,react.useEffect)((()=>{engine&&element.entity instanceof react_diagrams_defaults_dist.Fs&&setNode(element.entity)}),[element,model.getEdited()]),(0,react.useEffect)((()=>{node&&(setPortsIn(node.getInPorts()),setPortsOut(node.getOutPorts()),setIsShape(node.getShape()))}),[node,node?.getInPorts(),node?.getOutPorts()]);const handleAddPort=(value,isIn)=>{if(value){const port=new react_diagrams_defaults_dist.Gi({name:value,in:isIn});node.addPort(port),setPortName(null),setIsAddPortIn(!1),setIsAddPortOut(!1)}},onFocus=(0,react.useCallback)((()=>{model.setEdited(!0),engine.repaintCanvas()}),[model]),onBlur=(0,react.useCallback)((()=>{model.setEdited(!1),engine.repaintCanvas()}),[model]),handleDeletePort=(0,react.useCallback)((port=>{console.log("======================",port);try{node?.removePort(port)}catch(error){console.log("=====================",error)}engine.repaintCanvas(),setPortsIn(node.getInPorts()),setPortsOut(node.getOutPorts())}),[model,node]),renderPorts=(0,react.useCallback)((ports=>{if(ports)return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:ports?.length?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:ports.map((port=>(0,jsx_runtime.jsxs)("div",{style:{display:"flex"},children:[(0,jsx_runtime.jsx)("div",{style:{color:"white"},children:"Name: "}),(0,jsx_runtime.jsx)("input",{defaultValue:port?.getOptions()?.label,onChange:e=>{((element,value)=>{element.setLabel(value)})(port,e.target.value)},onBlur,onFocus}),(0,jsx_runtime.jsx)("button",{onClick:()=>handleDeletePort(port),children:"x"})]})))}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})})}),[element,node?.getPorts(),model.getEdited()]),handleOptionChange=event=>{setIsShape("true"===event.target.value),node.changeShape("true"===event.target.value),engine.repaintCanvas()},handleAddGroup=()=>{const group=new react_diagrams_defaults_dist.mZ,listNodes=selectedEntities.filter((entity=>entity instanceof react_diagrams_defaults_dist.Fs));group.addNodes(listNodes),model.addGroup(group),engine.repaintCanvas()};if(selectedEntities.length>1)return(0,jsx_runtime.jsx)("button",{onClick:handleAddGroup,children:"Add Group"});if(selectedEntities[0]instanceof react_diagrams_defaults_dist.mZ){const group=selectedEntities[0];return(0,jsx_runtime.jsxs)("div",{style:{color:"white"},children:[(0,jsx_runtime.jsx)("div",{children:"Group"}),(0,jsx_runtime.jsxs)("div",{children:["Name: ",group.getOptions().name]}),(0,jsx_runtime.jsxs)("div",{children:["Color: ",group.getOptions().color]}),(0,jsx_runtime.jsxs)("div",{children:["Height: ",group.height]}),(0,jsx_runtime.jsxs)("div",{children:["Width: ",group.width]}),(0,jsx_runtime.jsxs)("div",{children:["X: ",group.getPosition().x]}),(0,jsx_runtime.jsxs)("div",{children:["Y: ",group.getPosition().y]}),(0,jsx_runtime.jsxs)("div",{children:["List Nodes: ",Object.values(group.getNodesList()).map((node=>node.getOptions().name))]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("button",{onClick:()=>(group=>{group.unGroup(),engine.repaintCanvas()})(group),children:"Ungroup"}),(0,jsx_runtime.jsx)("button",{onClick:()=>(group=>{group.remove(),engine.repaintCanvas()})(group),children:"Delete Group"})]})]})}return(0,jsx_runtime.jsxs)("div",{style:{color:"white"},children:[(0,jsx_runtime.jsx)("button",{onClick:onClose,children:"Close"}),(0,jsx_runtime.jsx)("div",{children:"Name: "}),(0,jsx_runtime.jsx)("input",{defaultValue:node?.getOptions().name,onChange:e=>{var value;value=e.target.value,node.setName(value)},onBlur,onFocus}),(0,jsx_runtime.jsxs)("div",{style:{color:"white",display:"flex",alignItems:"center"},children:["Color:",(0,jsx_runtime.jsx)("input",{type:"color",defaultValue:node?.getOptions().color,onChange:e=>{return event=e,node.changeOptions("color",event.target.value),void engine.repaintCanvas();var event},style:{width:25,height:25,padding:"0",border:"none"}})]}),(0,jsx_runtime.jsxs)("div",{style:{color:"white"},children:["Height: ",element?.entity?.height]}),(0,jsx_runtime.jsxs)("div",{style:{color:"white"},children:["Width: ",element?.entity?.width]}),(0,jsx_runtime.jsxs)("div",{style:{color:"white"},children:["X: ",element?.entity?.position?.x]}),(0,jsx_runtime.jsxs)("div",{style:{color:"white"},children:["Y: ",element?.entity?.position?.y]}),(0,jsx_runtime.jsx)("div",{style:{borderBottom:"1px solid white",margin:"10px 0 "}}),(0,jsx_runtime.jsxs)("div",{style:{color:"white",marginBottom:10},children:[(0,jsx_runtime.jsx)("h3",{children:"Select Shape Option:"}),(0,jsx_runtime.jsxs)("label",{children:[(0,jsx_runtime.jsx)("input",{type:"radio",name:"shapeOption",value:"true",checked:!0===isShape,onChange:handleOptionChange}),"Shape (True)"]}),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsxs)("label",{children:[(0,jsx_runtime.jsx)("input",{type:"radio",name:"shapeOption",value:"false",checked:!1===isShape,onChange:handleOptionChange}),"Un-shape (False)"]})]}),(0,jsx_runtime.jsx)("div",{style:{color:"white",marginBottom:10},children:"Port In"}),(0,jsx_runtime.jsxs)("div",{style:{paddingLeft:10},children:[renderPorts(portsIn),isAddPortIn?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{style:{color:"white"},children:"New Port:"}),(0,jsx_runtime.jsx)("input",{autoFocus:!0,onChange:e=>{setPortName(e.target.value)},onBlur:()=>{handleAddPort(portName,!0),onBlur()},onFocus:()=>{onFocus()}})]}):(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>{setIsAddPortIn(!0)},children:"Add Out Port"})]}),(0,jsx_runtime.jsx)("div",{style:{borderBottom:"1px solid white",margin:"10px 0 "}}),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{style:{color:"white",marginBottom:10},children:"Port Out"}),renderPorts(portsOut),(0,jsx_runtime.jsx)("div",{style:{paddingLeft:10},children:isAddPortOut?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{style:{color:"white"},children:"New Port:"}),(0,jsx_runtime.jsx)("input",{autoFocus:!0,onChange:e=>{setPortName(e.target.value)},onBlur:()=>{handleAddPort(portName,!1),onBlur()},onFocus:()=>{onFocus()}})]}):(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>{setIsAddPortOut(!0)},children:"Add In Port"})})]})]})};let BodyWidget_S;PropertiesTray.displayName="PropertiesTray",function(_S){_S.Body=emotion_styled_browser_esm.Z.div`
		flex-grow: 1;
		display: flex;
		flex-direction: column;
		min-height: 100%;
	`,_S.Header=emotion_styled_browser_esm.Z.div`
		display: flex;
		background: rgb(30, 30, 30);
		flex-grow: 0;
		flex-shrink: 0;
		color: white;
		font-family: Helvetica, Arial, sans-serif;
		padding: 10px;
		align-items: center;
	`,_S.Content=emotion_styled_browser_esm.Z.div`
		display: flex;
		flex-grow: 1;
	`,_S.Layer=emotion_styled_browser_esm.Z.div`
		position: relative;
		flex-grow: 1;
	`}(BodyWidget_S||(BodyWidget_S={}));class BodyWidget extends react.Component{constructor(props){super(props),this.state={selected:null}}componentDidMount(){this.props.app.getDiagramEngine().getModel().getNodes().forEach((node=>{node.registerListener({eventDidFire:event=>{this.setState({selected:event})}})}))}componentDidUpdate(){this.props.app.getDiagramEngine().getModel().getNodes().forEach((node=>{node.registerListener({eventDidFire:event=>{this.setState({selected:event})}})}))}update(){this.forceUpdate()}render(){return(0,jsx_runtime.jsxs)(BodyWidget_S.Body,{children:[(0,jsx_runtime.jsxs)(BodyWidget_S.Header,{children:[(0,jsx_runtime.jsx)("div",{className:"title",children:"Storm React Diagrams - DnD demo"}),(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:()=>{(0,addon_actions_dist.aD)("Serialized Graph")(json_beautify(this.props.app.getDiagramEngine().getModel().serialize(),null,2,80))},children:"Serialize Graph"})]}),(0,jsx_runtime.jsxs)(BodyWidget_S.Content,{children:[(0,jsx_runtime.jsxs)(TrayWidget,{children:[(0,jsx_runtime.jsx)(TrayItemWidget,{model:{type:"in"},name:"In Node",color:"#B692F6"}),(0,jsx_runtime.jsx)(TrayItemWidget,{model:{type:"out"},name:"Out Node",color:"#25AAD0"}),(0,jsx_runtime.jsx)(TrayItemWidget,{model:{type:"two_port"},name:"In/Out Node",color:"#167646"})]}),(0,jsx_runtime.jsx)(BodyWidget_S.Layer,{onDrop:event=>{var data=JSON.parse(event.dataTransfer.getData("storm-diagram-node")),nodesCount=keys_default()(this.props.app.getDiagramEngine().getModel().getNodes()).length,node=null;if("in"===data.type)(node=new react_diagrams_dist.Fs({name:"Node "+(nodesCount+1),shape:!0,color:"#B692F6"})).addOutPort("Out 1"),node.addOutPort("Out 2"),node.addInPort("In");else if(customTypes.includes(data.type))node=new DiamondNodeModel.t(data.type);else if("two_port"===data.type){node=new react_diagrams_dist.Fs("Node "+(nodesCount+1),"#167646");const port1=new react_diagrams_dist.Gi({name:"In",in:!0,icon:"rhombus",icon_color:"#167646"});node.addPort(port1),node.addOutPort("Out")}else(node=new react_diagrams_dist.Fs({name:"Node "+(nodesCount+1),shape:!0,color:"#25AAD0"})).addOutPort("Out"),node.addOutPort("Out 1"),node.addOutPort("Out 2");var point=this.props.app.getDiagramEngine().getRelativeMousePoint(event);node.setPosition(point);const mouseElement=this.props.app.getDiagramEngine().getMouseElement(event);mouseElement instanceof react_diagrams_dist.dZ&&(mouseElement.addNode(node),this.forceUpdate()),this.props.app.getDiagramEngine().getModel().addNode(node),this.forceUpdate()},onDragOver:event=>{event.preventDefault()},children:(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine:this.props.app.getDiagramEngine()})})}),this.state.selected&&(0,jsx_runtime.jsx)(TrayWidget,{children:(0,jsx_runtime.jsx)(PropertiesTray,{element:this.state.selected,engine:this.props.app.getDiagramEngine(),onClose:()=>{this.props.app.getDiagramEngine().getModel().clearSelection(),this.setState({selected:null})}})})]})]})}}BodyWidget.displayName="BodyWidget";class RightAnglePortModel extends react_diagrams_dist.Gi{createLinkModel(factory){return new react_diagrams_dist.C6}}var react_diagrams_core_dist=__webpack_require__("../packages/react-diagrams-core/dist/index.js");class CreateLinkState extends dist.ZM{constructor(){super({name:"create-new-link"}),this.registerAction(new dist.aU({type:dist.n$.MOUSE_UP,fire:actionEvent=>{const element=this.engine.getActionEventBus().getModelForEvent(actionEvent),{event:{clientX,clientY}}=actionEvent,ox=this.engine.getModel().getOffsetX(),oy=this.engine.getModel().getOffsetY();if(element instanceof react_diagrams_core_dist.AJ&&!this.sourcePort){this.sourcePort=element;const link=this.sourcePort.createLinkModel();link.setSourcePort(this.sourcePort),link.getFirstPoint().setPosition(clientX-ox,clientY-oy),link.getLastPoint().setPosition(clientX-ox+20,clientY-oy+20),this.link=this.engine.getModel().addLink(link)}else element instanceof react_diagrams_core_dist.AJ&&this.sourcePort&&element!=this.sourcePort?this.sourcePort.canLinkToPort(element)&&(this.link.setTargetPort(element),element.reportPosition(),this.clearState(),this.eject()):element===this.link.getLastPoint()&&this.link.point(clientX-ox,clientY-oy,-1);this.engine.repaintCanvas()}})),this.registerAction(new dist.aU({type:dist.n$.MOUSE_MOVE,fire:actionEvent=>{if(!this.link)return;const{event}=actionEvent;this.link.getLastPoint().setPosition(event.clientX,event.clientY),this.engine.repaintCanvas()}})),this.registerAction(new dist.aU({type:dist.n$.KEY_UP,fire:actionEvent=>{27===actionEvent.event.keyCode&&(this.link.remove(),this.clearState(),this.eject(),this.engine.repaintCanvas())}}))}clearState(){this.link=void 0,this.sourcePort=void 0}}class DefaultState extends dist.ZM{constructor(){super({name:"starting-state"}),this.childStates=[new dist.If],this.dragCanvas=new dist.qR,this.createLink=new CreateLinkState,this.dragItems=new react_diagrams_core_dist.mk,this.registerAction(new dist.aU({type:dist.n$.MOUSE_DOWN,fire:event=>{const element=this.engine.getActionEventBus().getModelForEvent(event);if(element){if(element instanceof react_diagrams_core_dist.AJ)return;this.transitionWithEvent(this.dragItems,event)}else this.transitionWithEvent(this.dragCanvas,event)}})),this.registerAction(new dist.aU({type:dist.n$.TOUCH_START,fire:event=>{this.transitionWithEvent(new dist.qR,event)}})),this.registerAction(new dist.aU({type:dist.n$.MOUSE_UP,fire:event=>{this.engine.getActionEventBus().getModelForEvent(event)instanceof react_diagrams_core_dist.AJ&&this.transitionWithEvent(this.createLink,event)}}))}}dist.C7.TESTING=!0;const _2_AdvancedUsage_stories={title:"Advanced Usage"},_2_AdvancedUsage_stories_CloneSelected=()=>{var engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)");let port=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)");let port2=node2.addInPort("In");node2.setPosition(400,100);let link1=port.link(port2);return model.addAll(node1,node2,link1),engine.setModel(model),(0,jsx_runtime.jsx)(CloneSelected,{engine,model})},SerializingAndDeSerializing=()=>{var engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var link1=port1.link(port2);link1.addLabel(new react_diagrams_dist.Py({label:"Label"})),model.addAll(node1,node2,link1),engine.setModel(model);var str=JSON.stringify(model.serialize()),model2=new react_diagrams_dist.Vm;return model2.deserializeModel(JSON.parse(str),engine),engine.setModel(model2),(0,jsx_runtime.jsx)(DemoWorkspaceWidget.F,{buttons:(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:()=>{(0,addon_actions_dist.aD)("Serialized Graph")(json_beautify(model2.serialize(),null,2,80))},children:"Serialize Graph"}),children:(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})})},ProgramaticallyModifyingGraph=()=>{var engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var link1=port1.link(port2);return model.addAll(node1,node2,link1),engine.setModel(model),(0,jsx_runtime.jsx)(NodeDelayedPosition,{engine,model})},DragAndDrop=()=>{var app=new Application;return(0,jsx_runtime.jsx)(BodyWidget,{app})},SmartRouting=()=>{const engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node A","rgb(0,192,255)"),port1=node1.addPort(new react_diagrams_dist.Gi(!1,"out-1","Out"));node1.setPosition(340,350);const node2=new react_diagrams_dist.Fs("Node B","rgb(255,255,0)"),port2=node2.addPort(new react_diagrams_dist.Gi(!1,"out-1","Out"));node2.setPosition(240,80);const node3=new react_diagrams_dist.Fs("Node C","rgb(192,255,255)"),port3=node3.addPort(new react_diagrams_dist.Gi(!0,"in-1","In"));node3.setPosition(540,180);const node4=new react_diagrams_dist.Fs("Node D","rgb(192,0,255)"),port4=node4.addPort(new react_diagrams_dist.Gi(!0,"in-1","In"));node4.setPosition(95,185);const node5=new react_diagrams_dist.Fs("Node E","rgb(192,255,0)");node5.setPosition(250,180);const pathfinding=engine.getLinkFactories().getFactory(react_diagrams_dist.xU.NAME),link1=port1.link(port4,pathfinding),link2=port2.link(port3,pathfinding);return link1.addLabel(new react_diagrams_dist.Py({label:"I am a label!",offsetY:20})),model.addAll(node1,node2,node3,node4,node5,link1,link2),engine.setModel(model),(0,jsx_runtime.jsx)(DemoWorkspaceWidget.F,{buttons:(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:()=>{(0,addon_actions_dist.aD)("Serialized Graph")(JSON.stringify(model.serialize(),null,2))},children:"Serialize Graph"}),children:(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})})},RightAnglesRouting=()=>{const engine=(0,react_diagrams_dist.ZP)();engine.getLinkFactories().registerFactory(new react_diagrams_dist.$Q);const model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node A","rgb(0,192,255)"),port1=node1.addPort(new RightAnglePortModel(!1,"out-1","Out"));node1.setPosition(340,350);const node2=new react_diagrams_dist.Fs("Node B","rgb(255,255,0)"),port2=node2.addPort(new RightAnglePortModel(!1,"out-1","Out"));node2.setPosition(240,80);const node3=new react_diagrams_dist.Fs("Node C","rgb(192,255,255)"),port3=node3.addPort(new RightAnglePortModel(!0,"in-1","In"));node3.setPosition(540,180);const node4=new react_diagrams_dist.Fs("Node D","rgb(192,0,255)"),port4=node4.addPort(new RightAnglePortModel(!0,"in-1","In"));node4.setPosition(95,185);const link1=port1.link(port4),link2=port2.link(port3);return model.addAll(node1,node2,node3,node4,link1,link2),engine.setModel(model),(0,jsx_runtime.jsx)(DemoWorkspaceWidget.F,{buttons:(0,jsx_runtime.jsx)(DemoWorkspaceWidget.R,{onClick:()=>{(0,addon_actions_dist.aD)("Serialized Graph")(JSON.stringify(model.serialize(),null,2))},children:"Serialize Graph"}),children:(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})})},LinkingByClickingInsteadOfDragging=()=>{const engine=(0,react_diagrams_dist.ZP)(),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)");node1.addOutPort("Out"),node1.setPosition(100,100);const node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)");return node2.addInPort("In"),node2.setPosition(400,100),model.addAll(node1,node2),engine.setModel(model),engine.getStateMachine().pushState(new DefaultState),(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})},SettingCustomDeleteKeys=()=>{const engine=(0,react_diagrams_dist.ZP)({registerDefaultDeleteItemsAction:!1}),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs({name:"Node 1",color:"rgb(0,192,255)"});node1.setPosition(100,100);const port1=node1.addOutPort("Out"),node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);const link1=port1.link(port2);return link1.getOptions().testName="Test",link1.addLabel("Hello World!"),model.addAll(node1,node2,link1),engine.setModel(model),engine.getActionEventBus().registerAction(new dist.zp({keyCodes:[46]})),(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})},__namedExportsOrder=["CloneSelected","SerializingAndDeSerializing","ProgramaticallyModifyingGraph","DragAndDrop","SmartRouting","RightAnglesRouting","LinkingByClickingInsteadOfDragging","SettingCustomDeleteKeys"]},"./demos/demo-custom-node1/DiamondNodeFactory.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{n:()=>DiamondNodeFactory});var react=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),dist=__webpack_require__("../packages/react-diagrams/dist/index.js"),emotion_styled_browser_esm=__webpack_require__("../node_modules/.pnpm/@emotion+styled@11.11.0_@emotion+react@11.11.1_@types+react@18.2.22_react@18.2.0__@types+react@18.2.22_react@18.2.0/node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let S;(S||(S={})).Port=emotion_styled_browser_esm.Z.div`
		width: 16px;
		height: 16px;
		z-index: 10;
		background: rgba(0, 0, 0, 0.5);
		border-radius: 8px;
		cursor: pointer;

		&:hover {
			background: rgba(0, 0, 0, 1);
		}
	`;class DiamondNodeWidget extends react.Component{renderComponentByType(type){switch(type){case"diamond":return(0,jsx_runtime.jsx)("svg",{width:this.props.size,height:this.props.size,dangerouslySetInnerHTML:{__html:` <g id="Layer_1">\n          </g>\n          <g id="Layer_2">\n\t\t\t\t\t\t<polygon fill="mediumpurple" stroke="${this.props.node.isSelected()?"white":"#000000"}" stroke-width="3" stroke-miterlimit="10" points="10,`+this.props.size/2+" "+this.props.size/2+",10 "+(this.props.size-10)+","+this.props.size/2+" "+this.props.size/2+","+(this.props.size-10)+' "/>\n          </g>'}});case"circle":return(0,jsx_runtime.jsx)("svg",{width:this.props.size,height:this.props.size,dangerouslySetInnerHTML:{__html:`<g id="Layer_1">\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t<g id="Layer_2">\n\t\t\t\t\t\t\t<circle r=${this.props.size/2-5} cx=${this.props.size/2} cy=${this.props.size/2} stroke="${this.props.node.isSelected()?"white":"#000000"}" stroke-width="5" fill="whitesmoke" stroke-miterlimit="10"/>\n\t\t\t\t\t\t\t</g>`}});case"ellipse":return(0,jsx_runtime.jsx)("svg",{width:this.props.width,height:this.props.height,dangerouslySetInnerHTML:{__html:`<g id="Layer_1">\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t<g id="Layer_2">\n\t\t\t\t\t\t\t<ellipse cx=${this.props.width/2}  cy=${this.props.height/2}  rx=${this.props.width/2-5} ry=${this.props.height/2-5} stroke="${this.props.node.isSelected()?"white":"#000000"}" stroke-width="5" fill="lightcyan" stroke-miterlimit="10"/>\n\t\t\t\t\t\t\t</g>`}});default:return""}}renderDefaultPorts(type){return"diamond"===type||"circle"===type?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(dist.ER,{style:{top:this.props.size/2-8,left:-4,position:"absolute"},port:this.props.node.getPort(dist.tK.LEFT),engine:this.props.engine,children:(0,jsx_runtime.jsx)(S.Port,{})}),(0,jsx_runtime.jsx)(dist.ER,{style:{left:this.props.size/2-8,top:-4,position:"absolute"},port:this.props.node.getPort(dist.tK.TOP),engine:this.props.engine,children:(0,jsx_runtime.jsx)(S.Port,{})}),(0,jsx_runtime.jsx)(dist.ER,{style:{left:this.props.size-14,top:this.props.size/2-8,position:"absolute"},port:this.props.node.getPort(dist.tK.RIGHT),engine:this.props.engine,children:(0,jsx_runtime.jsx)(S.Port,{})}),(0,jsx_runtime.jsx)(dist.ER,{style:{left:this.props.size/2-8,top:this.props.size-14,position:"absolute"},port:this.props.node.getPort(dist.tK.BOTTOM),engine:this.props.engine,children:(0,jsx_runtime.jsx)(S.Port,{})})]}):"ellipse"===type?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(dist.ER,{style:{left:this.props.width/2-8,top:-2,position:"absolute"},port:this.props.node.getPort(dist.tK.TOP),engine:this.props.engine,children:(0,jsx_runtime.jsx)(S.Port,{})}),(0,jsx_runtime.jsx)(dist.ER,{style:{left:this.props.width/2-8,top:this.props.height-12,position:"absolute"},port:this.props.node.getPort(dist.tK.BOTTOM),engine:this.props.engine,children:(0,jsx_runtime.jsx)(S.Port,{})})]}):void 0}render(){const type=this.props.node.getType();return(0,jsx_runtime.jsxs)("div",{className:"diamond-node",style:{position:"relative",width:this.props.size,height:this.props.size},children:[this.renderComponentByType(type),this.renderDefaultPorts(type)]})}}DiamondNodeWidget.displayName="DiamondNodeWidget";var DiamondNodeModel=__webpack_require__("./demos/demo-custom-node1/DiamondNodeModel.ts"),react_canvas_core_dist=__webpack_require__("../packages/react-canvas-core/dist/index.js");class DiamondNodeFactory extends react_canvas_core_dist.a3{constructor(type){super(type),this.nodeType=type}generateReactWidget(event){return"ellipse"===this.nodeType||"rectangle"===this.nodeType?(0,jsx_runtime.jsx)(DiamondNodeWidget,{engine:this.engine,width:200,height:100,node:event.model}):(0,jsx_runtime.jsx)(DiamondNodeWidget,{engine:this.engine,node:event.model,size:150})}generateModel(event){return new DiamondNodeModel.t(this.nodeType)}}},"./demos/demo-custom-node1/DiamondNodeModel.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{t:()=>DiamondNodeModel});var _fjdr_react_diagrams__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../packages/react-diagrams/dist/index.js"),_DiamondPortModel__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./demos/demo-custom-node1/DiamondPortModel.ts");class DiamondNodeModel extends _fjdr_react_diagrams__WEBPACK_IMPORTED_MODULE_0__.XF{constructor(){super({type:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"diamond"}),this.addPort(new _DiamondPortModel__WEBPACK_IMPORTED_MODULE_1__.k(_fjdr_react_diagrams__WEBPACK_IMPORTED_MODULE_0__.tK.TOP)),this.addPort(new _DiamondPortModel__WEBPACK_IMPORTED_MODULE_1__.k(_fjdr_react_diagrams__WEBPACK_IMPORTED_MODULE_0__.tK.LEFT)),this.addPort(new _DiamondPortModel__WEBPACK_IMPORTED_MODULE_1__.k(_fjdr_react_diagrams__WEBPACK_IMPORTED_MODULE_0__.tK.BOTTOM)),this.addPort(new _DiamondPortModel__WEBPACK_IMPORTED_MODULE_1__.k(_fjdr_react_diagrams__WEBPACK_IMPORTED_MODULE_0__.tK.RIGHT))}}},"./demos/demo-custom-node1/DiamondPortModel.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{k:()=>DiamondPortModel});var _fjdr_react_diagrams__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../packages/react-diagrams/dist/index.js");class DiamondPortModel extends _fjdr_react_diagrams__WEBPACK_IMPORTED_MODULE_0__.AJ{constructor(alignment){super({type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"diamond",name:alignment,alignment})}createLinkModel(){return new _fjdr_react_diagrams__WEBPACK_IMPORTED_MODULE_0__.Si}}},"./demos/helpers/DemoWorkspaceWidget.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F:()=>DemoWorkspaceWidget,R:()=>DemoButton});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_emotion_styled__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../node_modules/.pnpm/@emotion+styled@11.11.0_@emotion+react@11.11.1_@types+react@18.2.22_react@18.2.0__@types+react@18.2.22_react@18.2.0/node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let S;var _S;(_S=S||(S={})).Toolbar=_emotion_styled__WEBPACK_IMPORTED_MODULE_1__.Z.div`
		padding: 5px;
		display: flex;
		flex-shrink: 0;
	`,_S.Content=_emotion_styled__WEBPACK_IMPORTED_MODULE_1__.Z.div`
		flex-grow: 1;
		height: 100%;
	`,_S.Container=_emotion_styled__WEBPACK_IMPORTED_MODULE_1__.Z.div`
		background: black;
		display: flex;
		flex-direction: column;
		height: 100%;
		border-radius: 5px;
		overflow: hidden;
	`;const DemoButton=_emotion_styled__WEBPACK_IMPORTED_MODULE_1__.Z.button`
	background: rgb(60, 60, 60);
	font-size: 14px;
	padding: 5px 10px;
	border: none;
	color: white;
	outline: none;
	cursor: pointer;
	margin: 2px;
	border-radius: 3px;

	&:hover {
		background: rgb(0, 192, 255);
	}
`;class DemoWorkspaceWidget extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(S.Container,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(S.Toolbar,{children:this.props.buttons}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(S.Content,{children:this.props.children})]})}}DemoWorkspaceWidget.displayName="DemoWorkspaceWidget"},"../node_modules/.pnpm/json-beautify@1.1.1/node_modules/json-beautify/index.js":module=>{var gap,indent,rep,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function quote(string){return rx_escapable.lastIndex=0,rx_escapable.test(string)?'"'+string.replace(rx_escapable,(function(a){var c=meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+string+'"'}function str(key,holder,limit){var i,k,v,length,partial,mind=gap,value=holder[key];switch(value&&"object"==typeof value&&"function"==typeof value.toJSON&&(value=value.toJSON(key)),"function"==typeof rep&&(value=rep.call(holder,key,value)),typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";if(gap+=indent,partial=[],"[object Array]"===Object.prototype.toString.apply(value)){for(length=value.length,i=0;i<length;i+=1)partial[i]=str(i,value,limit)||"null";return v=0===partial.length?"[]":gap?gap.length+partial.join(", ").length+4>limit?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"[ "+partial.join(", ")+" ]":"["+partial.join(",")+"]",gap=mind,v}if(rep&&"object"==typeof rep)for(length=rep.length,i=0;i<length;i+=1)"string"==typeof rep[i]&&(v=str(k=rep[i],value,limit))&&partial.push(quote(k)+(gap?": ":":")+v);else for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=str(k,value,limit))&&partial.push(quote(k)+(gap?": ":":")+v);return v=0===partial.length?"{}":gap?gap.length+partial.join(", ").length+4>limit?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{ "+partial.join(", ")+" }":"{"+partial.join(",")+"}",gap=mind,v}}module.exports=function beautify(value,replacer,space,limit){var i;if(gap="",indent="",limit||(limit=0),"number"!=typeof limit)throw new Error("beaufifier: limit must be a number");if("number"==typeof space)for(i=0;i<space;i+=1)indent+=" ";else"string"==typeof space&&(indent=space);if(rep=replacer,replacer&&"function"!=typeof replacer&&("object"!=typeof replacer||"number"!=typeof replacer.length))throw new Error("beautifier: wrong replacer parameter");return str("",{"":value},limit)}}}]);
//# sourceMappingURL=2_AdvancedUsage-stories.a1ffcfd7.iframe.bundle.js.map